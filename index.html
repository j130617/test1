<!DOCTYPE html>
<meta charset="utf-8">

<style> /* set the CSS */
body { font: 12px Arial;}
.bar { fill: steelblue; }
.toolTip {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    position: absolute;
    display: none;
    width: auto;
    height: auto;
    background: none repeat scroll 0 0 white;
    border: 0 none;
    border-radius: 8px 8px 8px 8px;
    box-shadow: -3px 3px 15px #888888;
    color: black;
    font: 12px sans-serif;
    padding: 5px;
    text-align: center;
}
</style>
<body>
	
<!-- load the d3.js library -->    	
<script src="//d3js.org/d3.v4.min.js"></script>

<script>
var margin = {top: 20, right: 20, bottom: 20, left: 20};

var height = 400 - margin.top - margin.bottom;
var width = 500 - margin.left - margin.right;

	// Add svg to
var svg = d3.select('body').append('svg').
attr('width', width + margin.left + margin.right).
attr('height', height + margin.top + margin.bottom).
	append('g').
		attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');
//title
svg.append("text")
  .attr("x", (width / 2))
  .attr("y", 0 - (margin.top / 3))
  .attr("text-anchor", "middle")
  .style("font-size", "16px")
  .style("text-decoration", "underline")
  .text("Test");

	// X scale
var x = d3.scaleBand().
range([width, 0])
  .padding(0.1);
//y scale
var y = d3.scaleLinear()
  .range([height, 0]);

var xAxis = d3.axisBottom(x);
var yAxis = d3.axisLeft(y).tickSize(6, 0);

// text label for the x axis
svg.append("text")
  .attr("transform", "translate(" + (width / 2) + " ," + (height + margin.top + 20) + ")")
  .style("text-anchor", "middle")
  .text("X Label");

function render(data) {
  x.domain(data.map(function(d) {
    return d["date"];
  }));
  y.domain(d3.extent(data, function(d) {
    return d["perc"];
  })).nice();
  
svg.selectAll('.bar').
  data(data).
  enter().append('rect').
  attr('class', function(d) {
    return "bar bar--" + (d["perc"] < 0 ? "negative" : "positive");
  }).
  attr('x', function(d) {
    return x(d["date"]);
  }).
  attr('y', function(d) {
    return y(Math.max(0, d["perc"]));
  }).
  attr('height', function(d) {
    return Math.abs(y(d["perc"]) - y(0));
  }).
  attr('width', x.bandwidth());
  svg.append('g').
  attr('class', 'y axis').
  attr('transform', 'translate(' + width + ',0)').
  call(yAxis);
  var tickNegative = svg.append('g').
  attr('class', 'x axis').
  attr('transform', 'translate(0,' + y(0) + ')').
  call(xAxis).
  selectAll('.tick').
  filter(function(d, i) {
    return data[i].value < 0;
  });
}
var data = [
 [{
  date: 1,
  MacdHistogram: 1
}, {
{
  date: 2010 1e kwartaal,
  perc: -0.001
},{
  date: 2010 2e kwartaal,
  perc: 0.019
},{
	date:2010 3e kwartaal, perc:0.017},
{date:2010 4e kwartaal, perc:0.019},
{date:2011 1e kwartaal, perc:0.028},
{date:2011 2e kwartaal, perc:0.021},
{date:2011 3e kwartaal, perc:0.14},
{date:2011 4e kwartaal, perc:0.00},
{date:2012 1e kwartaal, perc:-0.011},
{date:2012 2e kwartaal, perc:-0.006},
{date:2012 3e kwartaal, perc:-0.012},
{date:2012 4e kwartaal, perc:-0.012},
{date:2013 1e kwartaal, perc:-0.017},
{date:2013 2e kwartaal, perc:-0.005},
{date:2013 3e kwartaal, perc:0.003},
{date:2013 4e kwartaal, perc:0.014},
{date:2014 1e kwartaal, perc:0.013},
{date:2014 2e kwartaal, perc:0.014},
{date:2014 3e kwartaal, perc:0.011},
{date:2015 1e kwartaal, perc:0.019},
{date:2014 4e kwartaal, perc:0.018},
{date:2015 2e kwartaal, perc:0.021},
{date:2015 3e kwartaal, perc:0.025},
{date:2015 4e kwartaal, perc:0.014},
{date:2016 1e kwartaal*, perc:0.023},
{date:2016 2e kwartaal*, perc:0.024},
{date:2016 3e kwartaal*, perc:0.021},
{date:2016 4e kwartaal*, perc:0.02},
{date:2017 1e kwartaal*, perc:0.03},
{date:2017 2e kwartaal*, perc:0.029},
{date:2017 3e kwartaal*, perc:0.028},
{date:2017 4e kwartaal*, perc:0.027},
{date:2018 1e kwartaal*, perc:0.028},
{date:2018 2e kwartaal*, perc:0.029}];

render(data)
</script>
</body>
